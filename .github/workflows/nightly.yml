name: ExecuÃ§Ã£o Noturna (if + cron)

on:
  schedule:
    # roda a cada hora (ajuste conforme quiser)
    - cron: "0 * * * *"  # UTC â€” equivale a 21h, 22h, etc.
  workflow_dispatch:  # tambÃ©m pode rodar manualmente

jobs:
  run-at-night:
    runs-on: ubuntu-latest
    steps:
      - name: Obter hora atual (em UTC)
        id: hora
        run: |
          HORA_UTC=$(date -u +%H)
          echo "Hora UTC atual: $HORA_UTC"
          echo "hora=$HORA_UTC" >> $GITHUB_OUTPUT

      - name: Executar somente se for horÃ¡rio noturno (22hâ€“6h)
        if: ${{ steps.hora.outputs.hora >= 22 || steps.hora.outputs.hora < 6 }}
        run: |
          echo "ğŸŒ™ Ã‰ de noite! Executando tarefa noturna..."
          date
          echo "Exemplo: backup, relatÃ³rio, verificaÃ§Ã£o, etc."

      - name: Ignorar durante o dia
        if: ${{ steps.hora.outputs.hora < 22 && steps.hora.outputs.hora >= 6 }}
        run: |
          echo "â˜€ï¸ Agora Ã© dia, o workflow serÃ¡ ignorado."
          date
